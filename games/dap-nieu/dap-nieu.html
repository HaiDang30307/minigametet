<!-- Stage 5: ĐẬP NIÊU (festival timing game) -->
<section class="dap-nieu" id="dapNieuRoot" aria-label="Trò chơi ĐẬP NIÊU">
  <header class="dap-nieu__header">
    <div class="dap-nieu__titleBlock">
      <div class="dap-nieu__kicker">Màn 5</div>
      <h2 class="dap-nieu__title">ĐẬP NIÊU</h2>
      <p class="dap-nieu__subtitle">
        Canh đúng thời điểm để vung búa đập trúng niêu. Trúng là <b>thắng</b>, hết lượt là <b>thua</b>.
      </p>
    </div>

    <div class="dap-nieu__topActions">
      <button type="button" class="dap-nieu__btn dap-nieu__btn--ghost" data-action="toggleMusic" aria-pressed="false">
        <span class="dap-nieu__icon dap-nieu__icon--music" aria-hidden="true"></span>
        <span class="dap-nieu__musicLabel">Nhạc: Tắt</span>
      </button>
    </div>
  </header>

  <div class="dap-nieu__layout">
    <aside class="dap-nieu__panel dap-nieu__panel--rules">
      <div class="dap-nieu__panelTitle">Luật chơi (ngắn gọn)</div>
      <ul class="dap-nieu__rules">
        <li>Niêu đung đưa qua lại như ở hội làng.</li>
        <li>Nhấn <b>Đập!</b> đúng lúc niêu đi qua vùng mục tiêu.</li>
        <li>Mỗi ván có <b>3 lượt</b>. Trúng niêu: thắng. Hết lượt: thua.</li>
      </ul>
    </aside>

    <main class="dap-nieu__arenaWrap" aria-label="Sân chơi">
      <div class="dap-nieu__arenaHeader">
        <div class="dap-nieu__arenaTitle">Sân hội</div>
        <div class="dap-nieu__arenaSub">Niêu sẽ đung đưa. Canh đúng lúc!</div>
      </div>

      <!-- HUD luôn hiển thị trong tầm mắt -->
      <div class="dap-nieu__hud">
        <div class="dap-nieu__status">
          <div class="dap-nieu__badges">
            <span class="dap-nieu__badge" data-role="attempts">Lượt còn: 3</span>
            <span class="dap-nieu__badge dap-nieu__badge--gold" data-role="difficulty">Độ khó: Vừa</span>
          </div>
          <div class="dap-nieu__hint" data-role="hint">Bấm “Đập!” khi niêu vào vòng vàng.</div>
        </div>
        <div class="dap-nieu__controls">
          <button type="button" class="dap-nieu__btn dap-nieu__btn--hit" data-action="hit">
            <span class="dap-nieu__icon dap-nieu__icon--hammer" aria-hidden="true"></span>
            Đập!
          </button>
          <div class="dap-nieu__controlBtns">
            <button type="button" class="dap-nieu__btn dap-nieu__btn--finish" data-action="complete">Hoàn thành</button>
          </div>
        </div>
      </div>

      <div class="dap-nieu__arena" data-role="arena">
        <div class="dap-nieu__rope" aria-hidden="true"></div>

        <div class="dap-nieu__target" data-role="target" aria-hidden="true">
          <div class="dap-nieu__targetRing"></div>
          <div class="dap-nieu__targetGlow"></div>
        </div>

        <!-- Pot là một button lớn: tap là Đập! -->
        <div class="dap-nieu__pot" data-role="pot" data-action="hit" role="button" aria-label="Niêu">
          <div class="dap-nieu__potTop" aria-hidden="true"></div>
          <div class="dap-nieu__potBody" aria-hidden="true"></div>
          <div class="dap-nieu__potShine" aria-hidden="true"></div>
        </div>

        <div class="dap-nieu__hitFx" data-role="hitFx" aria-hidden="true"></div>
        <div class="dap-nieu__confetti" data-role="confetti" aria-hidden="true"></div>
        <div class="dap-nieu__toast" data-role="toast" aria-live="polite" aria-atomic="true"></div>
      </div>
    </main>
  </div>

  <div class="dap-nieu__modalBackdrop" data-role="modal" aria-hidden="true">
    <div class="dap-nieu__modal" role="dialog" aria-modal="true" aria-label="Kết quả">
      <div class="dap-nieu__modalTitle" data-role="modalTitle">Kết thúc</div>
      <div class="dap-nieu__modalMsg" data-role="modalMsg"></div>
      <div class="dap-nieu__modalBtns">
        <button type="button" class="dap-nieu__btn dap-nieu__btn--finish" data-action="completeFromModal">Hoàn thành</button>
      </div>
      <div class="dap-nieu__modalNote">
        Mẹo: Đợi niêu chạm vào vòng vàng rồi hãy đập để có tỷ lệ trúng cao nhất.
      </div>
    </div>
  </div>
</section>

<!-- Standalone-friendly assets (also handled by host loader when injected) -->
<link rel="stylesheet" href="games/dap-nieu/dap-nieu.css" />
<script src="games/dap-nieu/dap-nieu.js"></script>
