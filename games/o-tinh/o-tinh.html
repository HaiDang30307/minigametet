<!-- Stage 4: Ô TÍNH (Vietnamese folk misère Nim) -->
<section class="o-tinh" id="oTinhRoot" aria-label="Trò chơi Ô TÍNH">
  <header class="o-tinh__header">
    <div class="o-tinh__titleBlock">
      <div class="o-tinh__kicker">Màn 4</div>
      <h2 class="o-tinh__title">Ô TÍNH</h2>
      <p class="o-tinh__subtitle">
        Chơi dân gian kiểu rút que: người và máy luân phiên rút 1–3 que. Ai rút que cuối cùng là <b>thua</b>.
      </p>
    </div>

    <div class="o-tinh__topActions">
      <button type="button" class="o-tinh__btn o-tinh__btn--ghost" data-action="toggleMusic" aria-pressed="false">
        <span class="o-tinh__icon o-tinh__icon--music" aria-hidden="true"></span>
        <span class="o-tinh__musicLabel">Nhạc: Tắt</span>
      </button>
    </div>
  </header>

  <div class="o-tinh__layout">
    <aside class="o-tinh__panel o-tinh__panel--rules">
      <div class="o-tinh__panelTitle">Luật chơi (ngắn gọn)</div>
      <ul class="o-tinh__rules">
        <li>Có 5–7 ô (mỗi ô là một "bó que").</li>
        <li>Bạn click 1 ô rồi rút 1–3 que từ ô đó.</li>
        <li>Bạn và máy luân phiên.</li>
        <li><b>Ai rút que cuối cùng là THUA</b> (misère).</li>
      </ul>

      <div class="o-tinh__divider"></div>

      <div class="o-tinh__status">
        <div class="o-tinh__turnLine">
          <span class="o-tinh__badge" data-role="turnBadge">Lượt: Bạn</span>
          <span class="o-tinh__hint" data-role="hint">Chọn một ô để rút que.</span>
        </div>
        <div class="o-tinh__counts">
          <div class="o-tinh__countItem">
            <div class="o-tinh__countLabel">Tổng que còn lại</div>
            <div class="o-tinh__countValue" data-role="total">0</div>
          </div>
          <div class="o-tinh__countItem">
            <div class="o-tinh__countLabel">Số ô</div>
            <div class="o-tinh__countValue" data-role="piles">0</div>
          </div>
        </div>
      </div>
    </aside>

    <main class="o-tinh__boardWrap" aria-label="Bàn chơi">
      <div class="o-tinh__boardHeader">
        <div class="o-tinh__boardTitle">Các ô que</div>
        <div class="o-tinh__boardSub">Click vào một ô để chọn, rồi chọn 1–3 que để rút.</div>
      </div>

      <div class="o-tinh__board" data-role="board"></div>

      <!-- Bottom sheet controls: luôn ở trong khung nhìn mobile -->
      

      <div class="o-tinh__toast" data-role="toast" aria-live="polite" aria-atomic="true"></div>
      <div class="o-tinh__confetti" data-role="confetti" aria-hidden="true"></div>
    </main>
  </div>

  <div class="o-tinh__modalBackdrop" data-role="modal" aria-hidden="true">
    <div class="o-tinh__modal" role="dialog" aria-modal="true" aria-label="Kết quả">
      <div class="o-tinh__modalTitle" data-role="modalTitle">Kết thúc</div>
      <div class="o-tinh__modalMsg" data-role="modalMsg"></div>
      <div class="o-tinh__modalBtns">
        <button type="button" class="o-tinh__btn o-tinh__btn--finish" data-action="completeFromModal">Hoàn thành</button>
      </div>
      <div class="o-tinh__modalNote">
        Mẹo: Vì “rút que cuối là thua”, đôi khi bạn muốn để lại cho đối thủ đúng 1 que.
      </div>
    </div>
  </div>
</section>

<!-- These tags are intended for direct standalone use (optional).
     When loaded as Stage 4 (injected into #stageContainer),
     script.js will also ensure these assets are loaded once. -->
<link rel="stylesheet" href="games/o-tinh/o-tinh.css" />
<script src="games/o-tinh/o-tinh.js"></script>
